<source>
  @type  forward
  port  24224
</source>

<filter *.*.*.*.*>
  @type record_transformer
  enable_ruby
  <record>
    node     ${tag_parts[0]}
    grid     ${tag_parts[1]}
    stack    ${tag_parts[2]}
    service  ${tag_parts[3]}
    instance ${tag_parts[4]}

    # message ${record['log']}
  </record>
  # remove_keys log
</filter>

<match *.*.fluentd-logsene.*.*>
  @type null
</match>

<match *.*.*.*.*>
  @type logsene
  host "#{ENV['LOGSENE_HOST']}"
  port "#{ENV['LOGSENE_PORT']}"
  path "#{ENV['LOGSENE_PATH']}"
</match>

<match **>
  @type null
</match>
